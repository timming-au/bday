/* eslint-disable @typescript-eslint/explicit-module-boundary-types */
/*! Grained.js
* Author : Sarath Saleem  - https://github.com/sarathsaleem
* MIT license: http://opensource.org/licenses/MIT
* GitHub : https://github.com/sarathsaleem/grained
* v0.0.1
*/
export default function grained(e,t,n){var i,a=null,r=null;if("string"==typeof e&&(a=n.getElementById(e.split("#")[1])),a){r=a.id,"absolute"!==a.style.position&&(a.style.position="relative"),a.style.overflow="hidden";var o=["","-moz-","-o-animation-","-webkit-","-ms-"],l={animate:!0,patternWidth:100,patternHeight:100,grainOpacity:.1,grainDensity:1,grainWidth:1,grainHeight:1,grainChaos:.5,grainSpeed:20};Object.keys(t).forEach(function(e){l[e]=t[e]});for(var d=function(){var e=n.createElement("canvas"),t=e.getContext("2d");e.width=l.patternWidth,e.height=l.patternHeight;for(var i=0;i<l.patternWidth;i+=l.grainDensity)for(var a=0;a<l.patternHeight;a+=l.grainDensity){var r=256*Math.random()|0;t.fillStyle="rgba("+[r,r,r,l.grainOpacity].join()+")",t.fillRect(i,a,l.grainWidth,l.grainHeight)}return e.toDataURL("image/png")}(),g="",s=["0%:-10%,10%","10%:-25%,0%","20%:-30%,10%","30%:-30%,30%","40%::-20%,20%","50%:-15%,10%","60%:-20%,20%","70%:-5%,20%","80%:-25%,5%","90%:-30%,25%","100%:-10%,10%"],h=o.length;h--;){g+="@"+o[h]+"keyframes grained{";for(var m=0;m<s.length;m++){var p=s[m].split(":");g+=p[0]+"{",g+=o[h]+"transform:translate("+p[1]+");",g+="}"}g+="}"}var f=n.getElementById("grained-animation");f&&f.parentElement.removeChild(f);var y=n.createElement("style");y.type="text/css",y.id="grained-animation",y.innerHTML=g,n.body.appendChild(y);var c=n.getElementById("grained-animation-"+r);c&&c.parentElement.removeChild(c),(y=n.createElement("style")).type="text/css",y.id="grained-animation-"+r,n.body.appendChild(y);var u,v,b,E,C,H="background-image: url("+d+");";if(H+='position: absolute;content: "";height: 300%;width: 300%;left: -100%;top: -100%;',h=o.length,l.animate)for(;h--;)H+=o[h]+"animation-name:grained;",H+=o[h]+"animation-iteration-count: infinite;",H+=o[h]+"animation-duration: "+l.grainChaos+"s;",H+=o[h]+"animation-timing-function: steps("+l.grainSpeed+", end);";i="#"+r+"::before",u=y.sheet,b=H,C="",C=(v=i).length?v+"{"+b+"}":b,"insertRule"in u?u.insertRule(C,E):"addRule"in u&&u.addRule(v,b,E)}else console.error("Grained: cannot find the element with id "+e)}